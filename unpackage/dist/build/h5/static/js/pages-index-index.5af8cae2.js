(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{2967:function(i,t,e){var s=e("24fb");t=s(!1),t.push([i.i,"uni-page-body[data-v-68e05580]{background-color:#f5f5f5}body.?%PAGE?%[data-v-68e05580]{background-color:#f5f5f5}.topimg[data-v-68e05580]{width:%?750?%;height:%?400?%;background-color:#009581}.yibu[data-v-68e05580]{width:%?60?%;height:%?60?%;background-color:#009581;border-radius:50%;text-align:center;color:#f0f8ff;font-weight:700;line-height:%?60?%;margin:%?0?% %?20?%}.yibu_[data-v-68e05580]{width:%?60?%;height:%?60?%;background-color:#999;border-radius:50%;text-align:center;color:#f0f8ff;font-weight:700;line-height:%?60?%;margin:%?0?% %?20?%}.yibu1[data-v-68e05580]{height:%?70?%;border-radius:50%;text-align:center;color:#009581;font-weight:700;line-height:%?70?%;margin:%?0?% %?20?%;font-size:%?25?%}.yibu1_[data-v-68e05580]{height:%?70?%;border-radius:50%;text-align:center;color:#999;font-weight:700;line-height:%?70?%;margin:%?0?% %?20?%;font-size:%?25?%}.fengexian[data-v-68e05580]{width:%?200?%;height:2px;background-color:#009581}.fengexian1[data-v-68e05580]{width:%?200?%;height:2px;background-color:#999}.inputview[data-v-68e05580]{width:%?750?%;height:%?100?%;background-color:#fff}.xiayuibu[data-v-68e05580]{width:%?650?%;height:%?90?%;background-color:#009581;text-align:center;line-height:%?90?%;border-radius:%?10?%;color:#fff}.djck[data-v-68e05580]{font-size:%?30?%;font-weight:700;color:#009581}.yanzhneg1[data-v-68e05580]{line-height:%?60?%;background-color:#009581;color:#fff;text-align:center;font-size:%?28?%;padding:%?0?% %?20?%;border-radius:%?10?%}.zhanweitxt[data-v-68e05580]{color:#009581;font-weight:700;margin:%?0?% %?10?%}",""]),i.exports=t},"37dd":function(i,t,e){"use strict";var s=e("bd3f"),o=e.n(s);o.a},"66b7":function(i,t,e){"use strict";(function(i){e("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e("e25e");var s={data:function(){return{exhIndex:-1,type:1,qiyeForm:{exhibitorName:"",exhibitorTel:"",contactName:"",code:""},zhaweiForm:{boothNo:""},exhList:getApp().globalData.exhList,code:"",inputCode:"",exhId:"",exhType:"",dingshiqi:"",daojishi:100,exhInfo:{},zhanweiId:"",startYdTime:0}},onLoad:function(){var i=uni.getStorageSync("exhInfo");i?this.exhInfo=i:this.$tools.showToast("未获取到展会信息，请联系管理员");var t=uni.getStorageSync("exhIndex");t&&(this.exhIndex=parseInt(t));var e=uni.getStorageSync("zhanweiId");if(e&&(this.zhaweiForm.boothNo=e,this.type=3),1==this.type){var s=uni.getStorageSync("qiyeForm");s&&(this.qiyeForm=s)}},onReady:function(){this.toShare()},methods:{getYudingTime:function(){var t=this;this.$axios.axios("GET",this.$paths.subscribetimeapi,{}).then((function(e){if(200==e.code){var s=Math.floor(Date.now()/1e3);t.startYdTime=parseInt(e.msg),i("log","开始结束时间",s,t.startYdTime," at pages/index/index.vue:264"),s>=t.startYdTime?t.lockZhanwei(1):t.$tools.showToast("未到预定展位时间，请耐心等待")}else t.$tools.showToast("展位不存在或已被预定")})).catch((function(t){i("log","错误回调",t," at pages/index/index.vue:276")}))},exhIndexChange:function(i){this.exhIndex=i.detail.value,uni.setStorageSync("exhIndex",this.exhIndex+"")},onLongPress:function(){this.type=1},pdSubmit:function(){i("log","预定",this.inputCode,"202304"," at pages/index/index.vue:289"),"202304"==this.inputCode?this.lockZhanwei(1):this.getYudingTime()},lockZhanwei:function(){var t=this,e={boothNo:this.zhaweiForm.boothNo,exhibitorId:uni.getStorageSync("qiyeId")+""};return""==e.boothNo?(this.$tools.showToast("请输入展位号"),!1):""==e.exhibitorId?(this.$tools.showToast("企业不存在"),!1):this.exhIndex<0?(this.$tools.showToast("请先选择展会"),!1):(e.exhId=this.exhList[this.exhIndex].id,void this.$axios.axios("POST",this.$paths.locksubscribe,e).then((function(i){200==i.code?(t.$tools.showToast("预定成功"),uni.setStorageSync("zhanweiId",t.zhaweiForm.boothNo),t.toxiayibu()):t.$tools.showToast("展位不存在或已被预定")})).catch((function(t){i("log","错误回调",t," at pages/index/index.vue:345")})))},tosubmitZhanweihao:function(){var t=this,e=this.zhaweiForm;return""==e.boothNo?(this.$tools.showToast("请输入展位号"),!1):this.exhIndex<0?(this.$tools.showToast("请先选择展会"),!1):(e.exhId=this.exhList[this.exhIndex].id,void this.$axios.axios("POST",this.$paths.boothsubscribe,e).then((function(i){if(200==i.code){if(!i.data)return t.$tools.showToast("展位号不存在"),!1;i.data.exhibitorId?t.$tools.showToast(e.boothNo+"展位已被预定"):i.data.exhibitorId||t.$tools.showToast(e.boothNo+"未被预定")}else t.$tools.showToast(i.msg)})).catch((function(t){i("log","错误回调",t," at pages/index/index.vue:381")})))},toSubmitQiye:function(){var t=this;if(!this.isSubmitQiye())return!1;var e=this.qiyeForm;if(this.exhIndex<0)return this.$tools.showToast("请先选择展会"),!1;e.exhId=this.exhList[this.exhIndex].id,this.$axios.axios("POST",this.$paths.loginsubscribe,e).then((function(i){200==i.code?(t.$tools.showToast("企业信息提交成功"),uni.setStorageSync("qiyeId",i.data),t.inputCode=e.code,e.code="",uni.setStorageSync("qiyeForm",e),t.toxiayibu()):t.$tools.showToast(i.msg)})).catch((function(t){i("log","错误回调",t," at pages/index/index.vue:416")}))},isSubmitQiye:function(){return""==this.qiyeForm.exhibitorName?(this.$tools.showToast("请输入企业名称"),!1):""==this.qiyeForm.contactName?(this.$tools.showToast("请输入联系人姓名"),!1):""==this.qiyeForm.exhibitorTel?(this.$tools.showToast("请输入联系人电话"),!1):""==this.qiyeForm.code?(this.$tools.showToast("请输入验证码"),!1):this.qiyeForm.code==this.code||"202304"==this.qiyeForm.code||(this.$tools.showToast("请输入正确的验证码"),!1)},sendcode:function(){var t=this,e=this.qiyeForm;if(""==e.exhibitorTel)return this.$tools.showToast("请输入联系电话"),!1;if(100==this.daojishi){if(!uni.getStorageSync("exhInfo"))return this.$tools.showToast("无展会信息，请联系管理员"),!1;var s={params:{phone:this.qiyeForm.exhibitorTel,exhType:uni.getStorageSync("exhInfo").exhType,exhId:uni.getStorageSync("exhInfo").exhId}};if(this.exhIndex<0)return this.$tools.showToast("请先选择展会"),!1;this.$axios.axios("POST",this.$paths.sendmsggetphone,s).then((function(i){200==i.code?(t.$tools.showToast("短信发送成功"),t.code=i.data,clearInterval(t.dingshiqi),t.dingshiqi=setInterval((function(i){t.daojishi-1<=0?(t.daojishi=100,clearInterval(t.dingshiqi)):t.daojishi=t.daojishi-1}),1e3)):t.$tools.showToast(i.msg)})).catch((function(t){i("log","错误回调",t," at pages/index/index.vue:497")}))}},toxiayibu:function(){1==this.type?this.type=2:2==this.type&&(this.type=3)},toimg:function(){uni.navigateTo({url:"/pages/bujuImg/bujuImg"})},toShare:function(){var t=this,e=window.location.href,s=uni.getSystemInfoSync();i("log"," at pages/index/index.vue:522");var o="";o="ios"!=s.platform?e:window.location.href.split("#")[0];var a={params:{exhType:"3",url:o}};this.$axios.axios("post",this.$paths.ticketwxminiapp,a).then((function(e){i("log","获取分享数据",e," at pages/index/index.vue:540");try{t.util.jwxModule(e,"","",window.location.href,"")}catch(s){i("log","薄袄报错",s," at pages/index/index.vue:550")}})).catch((function(i){}))}}};t.default=s}).call(this,e("0de9")["log"])},a68b:function(i,t,e){"use strict";e.r(t);var s=e("f6b1"),o=e("a837");for(var a in o)["default"].indexOf(a)<0&&function(i){e.d(t,i,(function(){return o[i]}))}(a);e("37dd");var n=e("f0c5"),c=Object(n["a"])(o["default"],s["b"],s["c"],!1,null,"68e05580",null,!1,s["a"],void 0);t["default"]=c.exports},a837:function(i,t,e){"use strict";e.r(t);var s=e("66b7"),o=e.n(s);for(var a in s)["default"].indexOf(a)<0&&function(i){e.d(t,i,(function(){return s[i]}))}(a);t["default"]=o.a},bd3f:function(i,t,e){var s=e("2967");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[i.i,s,""]]),s.locals&&(i.exports=s.locals);var o=e("4f06").default;o("f9a3bc10",s,!0,{sourceMap:!1,shadowMode:!1})},f6b1:function(i,t,e){"use strict";e.d(t,"b",(function(){return s})),e.d(t,"c",(function(){return o})),e.d(t,"a",(function(){}));var s=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("v-uni-view",{staticClass:"colonn"},[e("v-uni-image",{staticClass:"topimg",attrs:{src:"https://meili-media.oss-cn-beijing.aliyuncs.com/zhanweitu/3dd91597577d7d6816d2be4a4fbe04a.jpg"}}),e("v-uni-view",{staticClass:"h-20"}),e("v-uni-view",{staticClass:"roww center_center"},[e("v-uni-view",{staticClass:"colonn"},[e("v-uni-view",{staticClass:"yibu"},[i._v("1")])],1),e("v-uni-view",{staticClass:"fengexian",class:{fengexian:i.type>=2,fengexian1:1==i.type}}),e("v-uni-view",{staticClass:"colonn"},[e("v-uni-view",{class:{yibu:i.type>=2,yibu_:1==i.type}},[i._v("2")])],1),e("v-uni-view",{staticClass:"fengexian",class:{fengexian:i.type>=3,fengexian1:i.type<3}}),e("v-uni-view",{staticClass:"colonn"},[e("v-uni-view",{class:{yibu:i.type>=3,yibu_:i.type<3}},[i._v("3")])],1)],1),e("v-uni-view",{staticClass:"roww center_center"},[e("v-uni-view",{staticClass:"colonn"},[e("v-uni-view",{staticClass:"yibu1"},[i._v("企业信息")])],1),e("v-uni-view",{staticClass:"allline"}),e("v-uni-view",{staticClass:"colonn"},[e("v-uni-view",{class:{yibu1:i.type>=2,yibu1_:i.type<2}},[i._v("展位选择")])],1),e("v-uni-view",{staticClass:"allline"}),e("v-uni-view",{staticClass:"colonn"},[e("v-uni-view",{class:{yibu1:i.type>=3,yibu1_:i.type<3}},[i._v("提交成功")])],1)],1),1==i.type?e("v-uni-view",{staticClass:"colonn"},[e("v-uni-picker",{attrs:{range:i.exhList,"range-key":"name"},on:{change:function(t){arguments[0]=t=i.$handleEvent(t),i.exhIndexChange.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"roww center_center border_bottom  inputview fs-30"},[e("v-uni-view",{staticClass:"w-30"}),e("v-uni-view",{staticClass:"roww w-150"},[e("v-uni-view",{staticStyle:{color:"red"}},[i._v("*")]),e("v-uni-view",[i._v("展会选择")])],1),e("v-uni-view",{staticClass:"w-30"}),e("v-uni-view",{staticClass:"roww w-500"},[i.exhIndex>=0?[i._v(i._s(i.exhList[i.exhIndex].name))]:[e("v-uni-view",{staticStyle:{color:"#999999"}},[i._v("请选择展会")])]],2),e("v-uni-view",{staticClass:"w-30"}),e("v-uni-view",{staticClass:"allline"})],1)],1),e("v-uni-view",{staticClass:"roww border_bottom center_center inputview fs-30"},[e("v-uni-view",{staticClass:"w-30"}),e("v-uni-view",{staticClass:"roww w-150"},[e("v-uni-view",{staticStyle:{color:"red"}},[i._v("*")]),e("v-uni-view",[i._v("企业名称")])],1),e("v-uni-view",{staticClass:"w-30"}),e("v-uni-input",{staticClass:"allline",attrs:{"placeholder-class":"fs-30",placeholder:"请输入企业名称"},model:{value:i.qiyeForm.exhibitorName,callback:function(t){i.$set(i.qiyeForm,"exhibitorName",t)},expression:"qiyeForm.exhibitorName"}}),e("v-uni-view",{staticClass:"w-30"})],1),e("v-uni-view",{staticClass:"roww border_bottom  center_center inputview fs-30"},[e("v-uni-view",{staticClass:"w-30"}),e("v-uni-view",{staticClass:"roww w-150"},[e("v-uni-view",{staticStyle:{color:"red"}},[i._v("*")]),e("v-uni-view",[i._v("姓名")])],1),e("v-uni-view",{staticClass:"w-30"}),e("v-uni-input",{staticClass:"allline",attrs:{maxlength:"6","placeholder-class":"fs-30",placeholder:"请输入联系人姓名"},model:{value:i.qiyeForm.contactName,callback:function(t){i.$set(i.qiyeForm,"contactName",t)},expression:"qiyeForm.contactName"}}),e("v-uni-view",{staticClass:"w-30"})],1),e("v-uni-view",{staticClass:"roww border_bottom  center_center inputview fs-30"},[e("v-uni-view",{staticClass:"w-30"}),e("v-uni-view",{staticClass:"roww w-150"},[e("v-uni-view",{staticStyle:{color:"red"}},[i._v("*")]),e("v-uni-view",[i._v("联系电话")])],1),e("v-uni-view",{staticClass:"w-30"}),e("v-uni-input",{staticClass:"allline",attrs:{maxlength:"11","placeholder-class":"fs-30",placeholder:"请输入联系电话"},model:{value:i.qiyeForm.exhibitorTel,callback:function(t){i.$set(i.qiyeForm,"exhibitorTel",t)},expression:"qiyeForm.exhibitorTel"}}),e("v-uni-view",{staticClass:"w-30"})],1),e("v-uni-view",{staticClass:"roww border_bottom  center_center inputview fs-30"},[e("v-uni-view",{staticClass:"w-30"}),e("v-uni-view",{staticClass:"roww w-150"},[e("v-uni-view",{staticStyle:{color:"red"}},[i._v("*")]),e("v-uni-view",[i._v("验证码")])],1),e("v-uni-view",{staticClass:"w-30"}),e("v-uni-input",{staticClass:"allline",attrs:{maxlength:"6","placeholder-class":"fs-30",placeholder:"请输入验证码"},model:{value:i.qiyeForm.code,callback:function(t){i.$set(i.qiyeForm,"code",t)},expression:"qiyeForm.code"}}),e("v-uni-view",{staticClass:"yanzhneg1",on:{click:function(t){t.stopPropagation(),arguments[0]=t=i.$handleEvent(t),i.sendcode.apply(void 0,arguments)}}},[100==i.daojishi?[e("v-uni-view",{staticStyle:{color:"#ffffff"}},[i._v("获取验证码")])]:[i._v("重新发送"+i._s(i.daojishi))]],2),e("v-uni-view",{staticClass:"w-30"})],1),e("v-uni-view",{staticClass:"h-100"}),e("v-uni-view",{staticClass:"roww center_center"},[e("v-uni-view",{staticClass:"xiayuibu",on:{click:function(t){t.stopPropagation(),arguments[0]=t=i.$handleEvent(t),i.toSubmitQiye.apply(void 0,arguments)}}},[i._v("下一步")])],1),e("v-uni-view",{staticClass:"h-40"})],1):i._e(),2==i.type?e("v-uni-view",{staticClass:"colonn"},[e("v-uni-view",{staticClass:"roww border_bottom  center_center inputview fs-30"},[e("v-uni-view",{staticClass:"w-30"}),e("v-uni-view",{staticClass:"roww w-150"},[e("v-uni-view",{staticStyle:{color:"red"}},[i._v("*")]),e("v-uni-view",[i._v("展位号")])],1),e("v-uni-view",{staticClass:"w-30"}),e("v-uni-input",{staticClass:"allline",attrs:{maxlength:"20","placeholder-class":"fs-30",placeholder:"请输入展位号"},model:{value:i.zhaweiForm.boothNo,callback:function(t){i.$set(i.zhaweiForm,"boothNo",t)},expression:"zhaweiForm.boothNo"}}),e("v-uni-view",{staticClass:"yanzhneg1",on:{click:function(t){t.stopPropagation(),arguments[0]=t=i.$handleEvent(t),i.tosubmitZhanweihao.apply(void 0,arguments)}}},[i._v("状态查询")]),e("v-uni-view",{staticClass:"w-30"})],1),e("v-uni-view",{staticClass:"roww center_center inputview fs-30"},[e("v-uni-view",{staticClass:"w-30"}),e("v-uni-view",{staticClass:"roww w-150"},[e("v-uni-view",[i._v("展位布局图")])],1),e("v-uni-view",{staticClass:"allline"}),e("v-uni-view",{staticClass:"djck",on:{click:function(t){t.stopPropagation(),arguments[0]=t=i.$handleEvent(t),i.toimg.apply(void 0,arguments)}}},[i._v("点击查看")]),e("v-uni-view",{staticClass:"w-30"})],1),e("v-uni-view",{staticClass:"h-100"}),e("v-uni-view",{staticClass:"roww center_center"},[e("v-uni-view",{staticClass:"xiayuibu",on:{click:function(t){t.stopPropagation(),arguments[0]=t=i.$handleEvent(t),i.pdSubmit(1)}}},[i._v("提交")])],1)],1):i._e(),3==i.type?e("v-uni-view",{staticClass:"colonn"},[e("v-uni-view",{staticClass:"colonn center_center  fs-30"},[e("v-uni-image",{staticClass:"w-250 m-top-130 m-bottom-30 h-250",attrs:{src:"/static/succ.png"}}),e("v-uni-view",{staticClass:"roww center_center"},[e("v-uni-view",[i._v("恭喜您")]),e("v-uni-view",{staticClass:"zhanweitxt"},[i._v("【"+i._s(i.zhaweiForm.boothNo)+"】")]),e("v-uni-view",{on:{longpress:function(t){arguments[0]=t=i.$handleEvent(t),i.onLongPress()}}},[i._v("展位抢占成功")])],1)],1),e("v-uni-view",{staticClass:"h-100"})],1):i._e()],1)},o=[]}}]);